---
title: "バージョン管理システム Jujutsu とは"
---
Jujutsu とは、なにやらネタっぽい名前ですが、Google所属の開発者 martinvonz 氏によるちゃんとしたプロダクトです。

ただ、名前が災いしてか、ネット検索しても「呪術廻戦」ばかりヒットしてしてしまい、なかなか有用な情報が得られません *(「`martinvonz/jj`」「`jj-vcs/jj`」が一番ヒットしやすいかなぁ)*。ですが、機械翻訳を頼れば、英語の公式情報でも十分です。

+ ホームページ：[Jujutsu docs](https://jj-vcs.github.io/jj/latest)
+ レポジトリ：[github.com/jj-vcs/jj](https://github.com/jj-vcs/jj)
+ Jujutsu の紹介記事：[jj init — Sympolymathesy, by Chris Krycho](https://v5.chriskrycho.com/essays/jj-init/)

とはいえ、ある程度、噛みくだいた日本語の説明もほしいところです。そこで本書では、簡単に「Jujutsu を使って、どういうメリットがあるのか。どう使えばいいのか」を説明し、利用のとっかかりになるものを目指したいと思います。

まず、ざっくりした特徴は次のとおりです。

+ 前の章で説明したとおり、コミット漏れを防ぐシステムとなっている
    + 現在の作業コピーも最新コミットであるかのように扱われる
    + ファイルを新規作成したり、変更すると、自動で反映される
      （逆に含めてはいけないファイルが入らないよう注意は必要）
    + いちいち stash せずとも、別のブランチに移動できる。それまでの作業中のファイルは無名ブランチの上の残る。その無名ブランチも `jj log` で、どこからの分岐がすぐ分かる（コミットログも任意のタイミングで更新可能）
      ![](/images/jj-log-vs-git.png)
+ `git add` に相当する操作がないということはコミットを適切な範囲に編集することができないのではないか？  
    + No. `jj split` でコミットを適宜分割できる。しかも編集エディターが結構使いやすい！
    ![](/images/jj-split.png)
+ 「ファイルの変更」の他、「ユーザの操作」も履歴管理される
    + ファイルの変更ログは `jj log`、 操作ログは `jj op log`
    + Git の場合は操作ごとにそれぞれの取り消しの方法があったが、Jujutsu は `jj undo` で統一されている
+ コミットの指定がしやすい
    + コミットを指定するのに必要最小限の2,3文字がすぐ分かる  
      （最初の引用画像の上半分のように、色を変えて表示される）
    + コミット指定に [Revsets](https://jj-vcs.github.io/jj/latest/revsets/) という柔軟な式が使える
+ Git 連携
    + `jj git clone URL` で、既存の Git レポジトリもそのまま Jujutsu で使える。無論一方通行ではなく、GitHub への push も可能。  
      （最初の引用画像は同じレポジトリのコミットログを jj / git 双方で見た結果）
+ 安全な同時レプリケーション (Safe, concurrent replication)
    + ロックファイルを作らず、作業ログによるマージを行うことにより、rsync、NFS、Dropbox などによる同期へある程度の対応しているそうです。ただし、Gitバックエンドが完全にロックフリーになっているわけではないため、まだレポジトリ破損の可能性は残っています。詳しくは [本家ドキュメントの Concurrency](https://jj-vcs.github.io/jj/latest/technical/concurrency/)を参照のこと

