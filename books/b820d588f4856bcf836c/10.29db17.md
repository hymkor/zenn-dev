---
title: "DLC1ï¼šå¸°ã£ã¦ããŸã€è¬ã® Unicode ç¾¤"
free: false
---

ã‚ã‚‹æ—¥ã€ä¸€è¡Œå…¥åŠ›ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼š[go-readline-ny](https://github.com/zetamatta/go-readline-ny)ã§ã®ã‚¿ãƒ–æ–‡å­—ã«ã¤ã„ã¦ã®å–ã‚Šæ‰±ã„ã«ã¤ã„ã¦æ¤œè¨ã™ã‚‹ãŸã‚ã€ã¡ã‚‡ã£ã¨å‹•ã‹ã—ã¦èª¿ã¹ã¦ãŸã‚‰ã€ã¨ã‚“ã§ã‚‚ãªã„ã“ã¨ã«æ°—ã¥ãã¾ã—ãŸã€‚

**ï¼ [ğŸ‘¨â€ğŸŒ¾ï¼ˆè¾²å¤«ï¼‰](https://emojipedia.org/man-farmer/)ãŒã€å³ã‚¯ãƒªãƒƒã‚¯ã§ WindowsTerminal ã«ãƒšãƒ¼ã‚¹ãƒˆã§ããªããªã£ã¦ã‚‹ã…ã…ã…ã…ï¼œ**

ã•ã£ããã€[go-console-test](https://github.com/zetamatta/go-console-test) ã§æ¤œè¨¼ã§ã™ï¼ˆä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã¯ã¡ã‚‡ã£ã¨é•·ã„ã§ã™ãŒã€ã‚¨ãƒ“ãƒ‡ãƒ³ã‚¹çš„ã«è¼‰ã›ã¦ã‚‹ã ã‘ãªã®ã§ã€ä¸€å¿œã€èª­ã¾ãªãã¦ã‚‚å¤§ä¸ˆå¤«ã§ã™ï¼‰

```
$ ./go-console-test.exe
Hit ESCAPE key to stop.
KeyEventRecord: &{KeyDown:0 RepeatCount:1 VirtualKeyCode:13 VirtualScanCode:28 UnicodeChar:13 ControlKeyState:0}

â†’ èµ·å‹•æ™‚ã® Enter å…¥åŠ›

KeyEventRecord: &{KeyDown:1 RepeatCount:1 VirtualKeyCode:18 VirtualScanCode:56 UnicodeChar:0 ControlKeyState:2}
KeyEventRecord: &{KeyDown:1 RepeatCount:1 VirtualKeyCode:102 VirtualScanCode:77 UnicodeChar:0 ControlKeyState:2}
KeyEventRecord: &{KeyDown:0 RepeatCount:1 VirtualKeyCode:102 VirtualScanCode:77 UnicodeChar:0 ControlKeyState:2}
KeyEventRecord: &{KeyDown:1 RepeatCount:1 VirtualKeyCode:99 VirtualScanCode:81 UnicodeChar:0 ControlKeyState:2}
KeyEventRecord: &{KeyDown:0 RepeatCount:1 VirtualKeyCode:99 VirtualScanCode:81 UnicodeChar:0 ControlKeyState:2}
KeyEventRecord: &{KeyDown:0 RepeatCount:1 VirtualKeyCode:18 VirtualScanCode:56 UnicodeChar:55357 ControlKeyState:0}

â†’ U+D83D ï¼ˆMANã®ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢å‰åŠã£ã½ã„ãŒã€KeyDownã‚³ãƒ¼ãƒ‰ãŒãªã„ï¼‰

KeyEventRecord: &{KeyDown:1 RepeatCount:1 VirtualKeyCode:18 VirtualScanCode:56 UnicodeChar:0 ControlKeyState:2}
KeyEventRecord: &{KeyDown:1 RepeatCount:1 VirtualKeyCode:102 VirtualScanCode:77 UnicodeChar:0 ControlKeyState:2}
KeyEventRecord: &{KeyDown:0 RepeatCount:1 VirtualKeyCode:102 VirtualScanCode:77 UnicodeChar:0 ControlKeyState:2}
KeyEventRecord: &{KeyDown:1 RepeatCount:1 VirtualKeyCode:99 VirtualScanCode:81 UnicodeChar:0 ControlKeyState:2}
KeyEventRecord: &{KeyDown:0 RepeatCount:1 VirtualKeyCode:99 VirtualScanCode:81 UnicodeChar:0 ControlKeyState:2}
KeyEventRecord: &{KeyDown:0 RepeatCount:1 VirtualKeyCode:18 VirtualScanCode:56 UnicodeChar:56424 ControlKeyState:0}

â†’ U+DC68ï¼ˆMAN ã®ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢å¾ŒåŠã£ã½ã„ãŒã€KeyDownã‚³ãƒ¼ãƒ‰ãŒãªã„ï¼‰

KeyEventRecord: &{KeyDown:1 RepeatCount:1 VirtualKeyCode:18 VirtualScanCode:56 UnicodeChar:0 ControlKeyState:2}
KeyEventRecord: &{KeyDown:1 RepeatCount:1 VirtualKeyCode:102 VirtualScanCode:77 UnicodeChar:0 ControlKeyState:2}
KeyEventRecord: &{KeyDown:0 RepeatCount:1 VirtualKeyCode:102 VirtualScanCode:77 UnicodeChar:0 ControlKeyState:2}
KeyEventRecord: &{KeyDown:1 RepeatCount:1 VirtualKeyCode:99 VirtualScanCode:81 UnicodeChar:0 ControlKeyState:2}
KeyEventRecord: &{KeyDown:0 RepeatCount:1 VirtualKeyCode:99 VirtualScanCode:81 UnicodeChar:0 ControlKeyState:2}
KeyEventRecord: &{KeyDown:0 RepeatCount:1 VirtualKeyCode:18 VirtualScanCode:56 UnicodeChar:8205 ControlKeyState:0}

â†’ U+200Dï¼ˆZeroWidthJoinerã€‚ã“ã‚Œã‚‚ KeyDownã‚³ãƒ¼ãƒ‰ãŒãªã„ï¼‰

KeyEventRecord: &{KeyDown:1 RepeatCount:1 VirtualKeyCode:18 VirtualScanCode:56 UnicodeChar:0 ControlKeyState:2}
KeyEventRecord: &{KeyDown:1 RepeatCount:1 VirtualKeyCode:102 VirtualScanCode:77 UnicodeChar:0 ControlKeyState:2}
KeyEventRecord: &{KeyDown:0 RepeatCount:1 VirtualKeyCode:102 VirtualScanCode:77 UnicodeChar:0 ControlKeyState:2}
KeyEventRecord: &{KeyDown:1 RepeatCount:1 VirtualKeyCode:99 VirtualScanCode:81 UnicodeChar:0 ControlKeyState:2}
KeyEventRecord: &{KeyDown:0 RepeatCount:1 VirtualKeyCode:99 VirtualScanCode:81 UnicodeChar:0 ControlKeyState:2}
KeyEventRecord: &{KeyDown:0 RepeatCount:1 VirtualKeyCode:18 VirtualScanCode:56 UnicodeChar:55356 ControlKeyState:0}

â†’ U+D83Cï¼ˆç¨²ç©‚ã®ã‚³ãƒ¼ãƒ‰ã®ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢ã®å‰åŠã€‚KeyDoâ€¦ï¼‰

KeyEventRecord: &{KeyDown:1 RepeatCount:1 VirtualKeyCode:18 VirtualScanCode:56 UnicodeChar:0 ControlKeyState:2}
KeyEventRecord: &{KeyDown:1 RepeatCount:1 VirtualKeyCode:102 VirtualScanCode:77 UnicodeChar:0 ControlKeyState:2}
KeyEventRecord: &{KeyDown:0 RepeatCount:1 VirtualKeyCode:102 VirtualScanCode:77 UnicodeChar:0 ControlKeyState:2}
KeyEventRecord: &{KeyDown:1 RepeatCount:1 VirtualKeyCode:99 VirtualScanCode:81 UnicodeChar:0 ControlKeyState:2}
KeyEventRecord: &{KeyDown:0 RepeatCount:1 VirtualKeyCode:99 VirtualScanCode:81 UnicodeChar:0 ControlKeyState:2}
KeyEventRecord: &{KeyDown:0 RepeatCount:1 VirtualKeyCode:18 VirtualScanCode:56 UnicodeChar:57150 ControlKeyState:0}

â†’ U+DF3Eï¼ˆã‚ã‚ã‚ã‚ã‚

KeyEventRecord: &{KeyDown:1 RepeatCount:1 VirtualKeyCode:27 VirtualScanCode:1 UnicodeChar:27 ControlKeyState:0}
<DESKTOP-LGGUCRA:~/go/src/github.com/zetamatta/go-console-test>
$
```

[APIã‹ã‚‰å…¥åŠ›ãŒã¨ã‚Œãªã‹ã£ãŸè¬ã® Unicode ç¾¤ï¼](https://zenn.dev/zetamatta/books/b820d588f4856bcf836c/viewer/ef707d)ã®ä¸å…·åˆã€Œã‚­ãƒ¼ã‚’æŠ¼ã—ãŸæ™‚ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã® UnicodeChar ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒã‚¼ãƒ­ã«ãªã£ã¦ã„ã¦ã€ã‚­ãƒ¼ã‚’é›¢ã—ãŸæ™‚ã® UnicodeChar ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã—ã‹æ–‡å­—ã‚³ãƒ¼ãƒ‰ãŒå…¥ã£ã¦ã„ãªã„ã€ã¨ã„ã†ç—‡çŠ¶ãŒã‚ˆã‚Šæ‚ªåŒ–ã—ã¦ã€ãã®ç¯„å›²ãŒåºƒãŒã£ã¦ã„ã‚‹ã®DEATHï¼â€¦orz

ã—ã‹ã—ã§ã™ã€‚ã€Œç•°ä½“å­—ã€ã¨æ ¼é—˜ã—ã¦ã„ãŸã“ã‚ã¯ 1.4.3243.0 ã§ã€ãã®ã“ã‚ã¯ã¾ã è¾²å¤«ã¯æ™®é€šã«å…¥åŠ›ã§ãã¦ã„ã¾ã—ãŸã€‚å…¥åŠ›ã§ããªããªã£ãŸç¾åœ¨ã® WindowsTerminal ã¯ 1.5.10271.0 ã§ã™ã€‚ã“ã®é–“ã« WindowsTerminal ã®ä»•æ§˜ãŒå¤‰æ›´ã•ã‚ŒãŸã¨è¦‹ã¦ã‚ˆã„ã§ã—ã‚‡ã†ã€‚ã§ã‚‚ã€å¤‰ã‚ã£ã¦ã—ã¾ã£ãŸã‚‚ã®ã¯ä»•æ–¹ãŒã‚ã‚Šã¾ã›ã‚“ã€‚å¯¾ç­–ã‚’æ‰“ãŸã­ã°ãªã‚Šã¾ã›ã‚“ã€‚

ã¨ã¯ã„ãˆâ€¦ CMD.EXE ã‚’ WindowsTerminal 1.5 ã§å‹•ã‹ã—ãŸæ™‚ã¯åŒ–ã‘ã¦å…¥ã‚‹ã‚‚ã®ã®ã€ã¡ã‚ƒã‚“ã¨å…¥åŠ›è‡ªä½“ã¯å‡ºæ¥ã¦ã„ã‚‹ã‚“ã§ã™ã‚ˆã­

![](https://storage.googleapis.com/zenn-user-upload/76gpchvb9jquy4zj7wd25ujrqe01)

ã“ã‚Œã¯ã‚‚ã—ã‹ã—ãŸã‚‰ã€ã¡ã‚ƒã‚“ã¨ã—ãŸã€Œä»•æ§˜ã€ãªã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã„ã‚ã„ã‚ã¨è€ƒãˆãŸçµæœã€æ¬¡ã®ã‚ˆã†ã«çµè«–ã¥ã‘ã¾ã—ãŸã€‚

- ä¸€èˆ¬ã®å…¥åŠ›ã¯ã€ã‚ªãƒ¼ãƒˆãƒªãƒ”ãƒ¼ãƒˆï¼šæŠ¼ã—ã£ã±ãªã—ã«ã™ã‚‹ã¨ã€ãã®ã‚­ãƒ¼ãŒæŠ¼ã—ã¦ã„ã‚‹é–“ä½•å›ã‚‚å…¥åŠ›ã•ã‚Œã‚‹ã¨ã„ã†ä»•æ§˜ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã«ã€Œã‚­ãƒ¼ãŒæŠ¼ã•ã‚ŒãŸç¬é–“ã«æ–‡å­—ã‚³ãƒ¼ãƒ‰ãŒå…¥åŠ›ã•ã‚Œã‚‹ã€ã¨ã„ã†å‹•ä½œã«ãªã£ã¦ã„ã‚‹
- IMEãŒãªã„ç’°å¢ƒã§åˆ©ç”¨ã•ã‚Œã‚‹ALT+ãƒ†ãƒ³ã‚­ãƒ¼ã«ã‚ˆã‚‹æ–‡å­—å…¥åŠ›ã«é–¢ã—ã¦ã¯ã€ALTã‚’é›¢ã—ãŸç¬é–“ã«ãªã£ã¦åˆã‚ã¦ Unicode ãŒç¢ºå®šã™ã‚‹ã®ã§ã€ŒALTã‚­ãƒ¼ãŒé›¢ã•ã‚ŒãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§æ–‡å­—ã‚³ãƒ¼ãƒ‰ãŒå…¥åŠ›ã•ã‚Œã‚‹ã€ã¨ã„ã†å‹•ä½œã«ã›ã–ã‚‹ã‚’ãˆãªã„
    - ALTã‚­ãƒ¼ãŒé›¢ã•ã‚Œã‚‹ã¾ã§æ–‡å­—ã‚³ãƒ¼ãƒ‰ã¯ç¢ºå®šã•ã‚Œãªã„ã‹ã‚‰ã€é€”ä¸­ã®ALT+ãƒ†ãƒ³ã‚­ãƒ¼ã®æ•°å­—ãŒä½•ã§ã‚ã‚ã†ã¨å®Ÿã¯é–¢ä¿‚ãªã„ã€‚ãªãœãªã‚‰ã€æœ€çµ‚çš„ã« ALT ã‚’é›¢ã—ãŸæ™‚ã® UnicodeChar ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã ã‘ã‚’å‚ç…§ã™ã‚Œã°ã‚ˆã„ã‹ã‚‰ã€‚ALTã‚­ãƒ¼+ãƒ†ãƒ³ã‚­ãƒ¼ã¯ä¸€å›ä»¥ä¸ŠæŠ¼ä¸‹ãŒç¢ºèªã•ã‚Œã°ååˆ†ã§ã‚ã‚Šã€å…¥ã£ã¦ã„ã‚‹ã‚­ãƒ¼æ“ä½œè‡ªä½“ã¯ã€Œã‚­ãƒ¼ãƒœãƒ¼ãƒ‰å…¥åŠ›ã‚’ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹ã ã‘ã®å³ã‚¯ãƒªãƒƒã‚¯ã«ã‚ˆã‚‹ãƒšãƒ¼ã‚¹ãƒˆã«ãŠã„ã¦ã¯ã€ãƒ€ãƒŸãƒ¼ã§é©å½“ãªã‚‚ã®ãŒå…¥ã£ã¦ã„ã‚‹ã ã‘ã ã¨è€ƒãˆã¦å·®ã—æ”¯ãˆãªã„

ã¨ã„ã†ã“ã¨ã§ã€æ–‡å­—ã‚³ãƒ¼ãƒ‰ã‚’ ReadConsoleInput ã‹ã‚‰æ‹¾ã„ä¸Šã’ã‚‹ã¨ã“ã‚ã‚’æ¬¡ã®ã‚ˆã†ã«æ”¹ã‚ã¾ã—ãŸã€‚
- ALTã‚­ãƒ¼ãŒé›¢ã•ã‚ŒãŸæ™‚ã«æ–‡å­—ã‚³ãƒ¼ãƒ‰ã‚’ UnicodeChar ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‹ã‚‰èª­ã¿ä¸Šã’ã‚‹æ¡ä»¶ã¨ã—ã¦
	- ã€ŒALTã‚­ãƒ¼ãŒæŠ¼ã•ã‚ŒãŸã€ã ã‘ã§ãªãã€ŒALTã‚­ãƒ¼ãŒæŠ¼ã•ã‚Œã¦ã„ã‚‹é–“ã«ãƒ†ãƒ³ã‚­ãƒ¼ãŒï¼‘å›ä»¥ä¸ŠæŠ¼ã•ã‚ŒãŸã€ã“ã¨ã‚‚æ¡ä»¶ã«è¿½åŠ 
	- ãã®ã‹ã‚ã‚Šã€ä»¥å‰å…¥ã‚Œã¦ã„ãŸã€å¯¾è±¡ã¨ã™ã‚‹ Unicode ã‚’ U+2000ï½U+2FFF ã«é™ã‚‹ã¨ã„ã†æ¡ä»¶ã‚’æ’¤å»ƒ

ã¾ãã€ã“ã‚Œã§ã€ã¨ã‚Šã‚ãˆãšè¦‹ã‹ã‘ä¸Šã¯æœŸå¾…ã©ãŠã‚Šã«ã¯å‹•ãã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ã“ã®ä¿®æ­£ãŒæœãŸã—ã¦é©åˆ‡ãªã‚‚ã®ã§ã‚ã‚‹ã‹ã¯ Microsoft ã•ã‚“ã®ã¿ãŒçŸ¥ã‚‹ã¨ã“ã‚ã§ã™ãŒâ€¦ãªã‹ãªã‹é›£ã—ã„è©±ã§ã™ã€‚

ï¼ˆ WindowsTerminal ã« issue ã‚’ç«‹ã¦ã¦ã‚‚ã‚ˆã‹ã£ãŸã‚“ã§ã™ãŒã€ä¸Šã®ã‚ˆã†ã«ã€ŒãŠãã‚‰ãä»•æ§˜ã€ã§ã‚ã‚‹å¯èƒ½æ€§ã‚’è€ƒãˆã‚‹ã¨ã€ã¡ã‚‡ã£ã¨ãã‚Œã«ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ä½¿ã†ãƒ‘ãƒ¯ãƒ¼ã¯æ»å‡ºã§ãã¾ã›ã‚“ã§ã—ãŸã€ãƒ¢ãƒãƒ™çš„ã«ã‚‚ã€èªå­¦çš„ã«ã‚‚ ï¼‰